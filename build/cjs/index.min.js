'use strict';

var NTFormat=function(){};NTFormat.textf=function(){var e=1,t=arguments,r=function(e){if(e>=0)return e;var t=-e,r=~t>>16&65535;return (r*=65536)+(65535&~t)+1};return t[0].replace(/%[^diubBoxXeEfFgGaAcspn%]*[diubBoxXeEfFgGaAcspn%]/g,(function(a){var n,s=a.substring(1,a.length),g=(n=s.match(/.$/))[0];if("%"===g)return "%";null!==(n=s.match(/^[0-9]+\$/))&&(n=n[0],s=s.substring(n.length,s.length),n=n.substring(0,n.length-1),e=parseInt(n,10));var i=t[e];"string"!=typeof i&&"number"!=typeof i&&(i=i.toString()),e+=1;var o=!1,l=!1,c=!1,f="";null!==(n=s.match(/^[-+ #0]+/))&&(n=n[0],s=s.substring(n.length,s.length),-1!==n.indexOf("#")&&(o=!0),-1!==n.indexOf("-")&&(l=!0),-1!==n.indexOf(" ")&&(f=" "),-1!==n.indexOf("+")&&(f="+"),-1!==n.indexOf("0")&&(c=!0));var u=0;null!==(n=s.match(/^([0-9]+|\*)/))&&(n=n[0],s=s.substring(n.length,s.length),-1!==n.indexOf("*")?(u=i,i=t[e],e+=1):u=parseInt(n,10));var d=!1,h=0;null!==(n=s.match(/^(\.((-?[0-9]+)|\*)|\.)/))&&(n=n[0],s=s.substring(n.length,s.length),d=!0,-1!==n.indexOf("*")?(h=i,i=t[e],e+=1):1===n.length?h=0:(n=n.substring(1,n.length),h=parseInt(n,10))),null!==(n=s.match(/^hh|h|ll|l|L|z|j|t/))&&(s=s.substring(n.length,s.length));var p="",m=!1;switch(g.toLowerCase()){case"d":case"i":case"u":case"b":case"o":case"x":m=!0;case"e":case"f":case"g":var b,T="";switch(m?(isNaN(i)&&(i=parseInt(i,10)),"d"===g||"i"===g?(i<0&&(f="-",i=-i),i=Math.floor(i)):i=i>=0?Math.floor(i):Math.ceil(i)):(isNaN(i)&&(i=parseFloat(i)),i<0&&(f="-",i=-i),d||(h=6)),g.toLowerCase()){case"d":case"i":p+=i.toString(10);break;case"u":p+=r(i).toString(10);break;case"b":p+=r(i).toString(2),o&&(T="0b");break;case"o":p+=r(i).toString(8),o&&(T="0");break;case"x":case"X":p+=r(i).toString(16),o&&(T="0x");break;case"e":p+=i.toExponential(h);break;case"f":p+=i.toFixed(h);break;case"g":0===h&&(h=1),p+=i.toPrecision(h),o||-1===p.indexOf(".")||(p=(p=p.replace(/\.?0+$/,"")).replace(/\.?0+e/,"e"));}if(m){if(d){b=h-p.length;for(var x=0;x<b;x++)p="0"+p;}}else o&&-1===p.indexOf(".")&&(-1!==p.indexOf("e")?p=p.replace("e",".e"):p+=".");if(-1!==p.indexOf("e")){p=p.replace(/e[+-][0-9]{1,2}$/,(function(e){var t=e.length;return 3===e.length?e.substring(0,t-1)+"00"+e.substring(t-1,t):e.substring(0,t-2)+"0"+e.substring(t-2,t)}));}if(b=u-(p.length+T.length+f.length),l)for(var S=0;S<b;S++)p+=" ";if(c)for(var C=0;C<b;C++)p="0"+p;if(p=f+(p=T+p),!c&&!l)for(var v=0;v<b;v++)p=" "+p;g.toUpperCase()===g&&(p=p.toUpperCase());break;case"c":isNaN(i)||(i=String.fromCharCode(i));case"s":isNaN(i)||(i=i.toString(10)),p=i,d&&p.length>h&&(p=p.substring(0,h));var N=u-p.length;if(l)for(var F=0;F<N;F++)p+=" ";else for(var M=c?"0":" ",O=0;O<N;O++)p=M+p;break;case"%":p="%";break;case"p":case"n":p="(unsupported)";}return p}))},NTFormat.datef=function(e,t,r){var a=r||(new Date).getTimezoneOffset(),n=new Date(t);n.setUTCMinutes(n.getUTCMinutes()-a);var s=n.getUTCFullYear(),g=n.getUTCMonth()+1,i=n.getUTCDate(),o=n.getUTCHours(),l=n.getUTCMinutes(),c=n.getUTCSeconds(),f=n.getUTCMilliseconds(),u=n.getUTCDay(),d=[26085,26376,28779,27700,26408,37329,22303],h=String.fromCharCode(26332)+String.fromCharCode(26085),p=e;return p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=p.replace(/YYYY/g,s.toString())).replace(/YY/g,(s%100).toString())).replace(/MM/g,NTFormat.textf("%02d",g))).replace(/M/g,g.toString())).replace(/DD/g,NTFormat.textf("%02d",i))).replace(/D/g,i.toString())).replace(/hh/g,NTFormat.textf("%02d",o))).replace(/h/g,o.toString())).replace(/mm/g,NTFormat.textf("%02d",l))).replace(/m/g,l.toString())).replace(/ss/g,NTFormat.textf("%02d",c))).replace(/s/g,c.toString())).replace(/000/g,NTFormat.textf("%03d",f))).replace(/aaaa/g,String.fromCharCode(d[u])+h)).replace(/aaa/g,String.fromCharCode(d[u]))).replace(/dddd/g,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u])).replace(/ddd/g,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u])).replace(/day/g,u.toString())},NTFormat.jpdate=function(e){return NTFormat.datef("YYYY-MM-DDThh:mm:ss+09:00",e,-540)};

module.exports=NTFormat;
